<ng-container *ngIf="getPaymentDetail$ | async as getPaymentDetail;">
  <ng-container *ngIf="getPaymentDetail.IsSuccess && getPaymentDetail.IsEndPayment; then success;
    else (getPaymentDetail.IsSuccess && !getPaymentDetail.IsEndPayment && fail )
    || (!getPaymentDetail.IsSuccess && !getPaymentDetail.IsEndPayment && error)">
  </ng-container>


  <ng-template #success>
    <ng-container *ngIf="headerData$">
      <app-header [headerSetting]="headerData$"></app-header>
      <app-progress-bar class="no-print"></app-progress-bar>
      <div id="form">
        <div class="container">
          <div class="main_form">
            <div class="text-center">
              <img class="success" src="assets/images/success.svg" alt="">
              <h2>Success!</h2>
            </div>
            <h2 class="main_form_title mb-5">
              Payment Result Information
            </h2>
            <div class="payment_form mb-3">
              <div class="payment_form_table">
                <div class="payment_form_row">
                  <div class="title">
                    Payment Status
                  </div>
                  <div class="content">{{getPaymentDetail.ResponseData.status.statusName}}</div>
                </div>
                <div class="payment_form_row" *ngIf="!isMobileLayout">
                  <div class="title">

                  </div>
                  <div class="content"></div>
                </div>
                <div class="payment_form_row">
                  <div class="title">
                    Application Number
                  </div>
                  <div class="content">{{getPaymentDetail.ResponseData.paymentNumber}}</div>
                </div>
                <div class="payment_form_row">
                  <div class="title">
                    Description
                  </div>
                  <div class="content">{{getPaymentDetail.ResponseData.paymentDescription}}</div>
                </div>
                <div class="payment_form_row  payment_form_row-noborder">
                  <div class="title">
                    Payment Source
                  </div>
                  <div class="content">{{getPaymentDetail.ResponseData.system}}</div>
                </div>
                <div class="payment_form_row  payment_form_row-noborder">
                  <div class="title">
                    Payable Amount
                  </div>
                  <div class="content">
                    {{getPaymentDetail.ResponseData.currency}} <span style="color:red;margin-left:5px">
                      {{getPaymentDetail.ResponseData.payAmount | amountConverter}}</span>
                  </div>
                </div>


              </div>
            </div>
            <div class="main_form_buttonGroup no-print">
              <button class="button_outline" (click)="printPage()">Print</button>
              <button class="button_outline" (click)="closewin()">Leave</button>
            </div>
          </div>
        </div>
      </div>
      <app-footer [footerSetting]="headerData$"></app-footer>
    </ng-container>
  </ng-template>
  <ng-template #fail>
    <ng-container *ngIf="headerData$">
      <app-header [headerSetting]="headerData$"></app-header>
      <div id="form">
        <div class="container">
          <div class="main_form">
            <div class="text-center">
              <img class="fail" src="assets/images/fail.svg" alt="" style="margin: auto">
              <p>{{getPaymentDetail.ErrorMessage}}</p>
            </div>
          </div>
        </div>
      </div>
      <app-footer [footerSetting]="headerData$"></app-footer>
    </ng-container>
  </ng-template>

</ng-container>
<ng-template #error>
  <app-header [headerSetting]="headerData$"></app-header>
  <div id="form">
    <div class="container">
      <div class="main_form">
        <div class="text-center">
          <img class="fail mb-3" src="assets/images/fail.svg" alt="" style="margin: auto">
          <p class="mb-3" style="margin-top:1.5rem">Your payment is not completed. Please click the button below to
            complete the payment.</p>
          <button style="background: #17618f;color: #fff;" (click)="backToPayment()">Make Payment</button>
        </div>
      </div>
    </div>
  </div>
  <app-footer [footerSetting]="headerData$"></app-footer>
</ng-template>
<ng-container *ngIf="errorPage;then error">
</ng-container>
<ng-template #loading>
  <app-loading-page></app-loading-page>
</ng-template>
